"use strict";function findOpponent(a){for(var b=0;b<users.length;b++)a!==users[b]&&new Match(a,users[b])}function removeUser(a){return users.splice(users.indexOf(a),1)}function Match(a,b){for(var c=[a,b],d=[],e=0,f=c.length;e<f;e++)d.push(c[e].socket.id.substr(2));this.game=new Game({server:!0,players:c}),games.push(this.game),a.match=this,b.match=this,usersInGames.push(removeUser(a)),usersInGames.push(removeUser(b));for(var e=0,f=c.length;e<f;e++)c[e].socket.emit("start",{players:d})}function User(a){this.socket=a,this.match=null}var users=[],games=[],usersInGames=[];setInterval(function(){for(var a=[],b=0,c=games.length;b<c;b++)0===Object.keys(games[b].players).length&&a.push(games[b]);if(a.length)for(var b=0,c=a.length;b<c;b++)games.splice(b,1)},1e3),module.exports=function(a){var b=new User(a);users.push(b),findOpponent(b),a.on("disconnect",function(){console.log("Disconnected: "+a.id),null!==b.match&&b.match.game.disconnect(a.id.substr(2)),removeUser(b)}),console.log("Connected: "+a.id)};